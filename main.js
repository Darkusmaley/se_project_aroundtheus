!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._setEventListeners(),this._cardElement}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector("#card-delete-button");const e=this._cardElement.querySelector(".card__image"),t=this._cardElement.querySelector(".card__heading");this._likeButton.addEventListener("click",(()=>{this._handleLIkeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._deleteCardIcon()})),e.src=this._link,e.alt=this._name,t.textContent=this._name,e.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleLIkeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_deleteCardIcon(){this._cardElement.remove(),this._cardElement=null}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputerror(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputerror(e)}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableBtn():this._enableBtn()}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitBtn=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputerror(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEsc=e=>{this._handleEscClose(e)}}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEsc)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class n extends s{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputs=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){return this._inputValues={},this._inputs.forEach((e=>this._inputValues[e.name]=e.value)),this._inputValues}resetForm(){this._popupForm.reset()}getFormName(){return this._popupForm.getAttribute("name")}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}document.getElementById("AroundtheUS").src="229667a1c52df21375a8.svg";const r=document.querySelector("#profile-edit-button"),i=document.querySelector("#name"),o=document.querySelector("#description"),a=(document.forms["profile-edit-form"],document.querySelector(".profile__add-button")),l=(document.forms["add-card-form"],document.querySelector(".cards__list"),{});function c(t){return new e(t,"#template",u).getView()}function u(e,t){d.open(e,t)}var m;m={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(m.formSelector)).forEach((e=>{const s=new t(m,e),n=e.getAttribute("name");l[n]=s,s.enableValidation()}));const d=new class extends s{constructor(e){super({popupSelector:e}),this._imagePreview=this._popupElement.querySelector("#image-preview"),this._imageCaption=document.querySelector("#image-preview-caption")}open(e,t){this._imagePreview.src=t,this._imagePreview.alt=e,this._imageCaption.textContent=e,super.open()}}("#image-preview-modal");d.setEventListeners();const _=new n("#profile-edit-modal",(function(e){h.setUserInfo({name:e.name,job:e.description}),_.close()}));_.setEventListeners();const h=new class{constructor(e,t){this._name=document.querySelector(e),this._job=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._name.textContent=t,this._job.textContent=s}}(".profile__title",".profile__description"),p=new n("#new-card-modal",(function(e){E.addItems(c(e)),l[p.getFormName("add-card-form")].disableBtn(),p.close(),p.resetForm()}));p.setEventListeners(),a.addEventListener("click",(function(){p.open()})),r.addEventListener("click",(function(e){const{name:t,job:s}=h.getUserInfo();o.value=s,i.value=t,_.open(),l[_.getFormName("profile-edit-form")].resetValidation()}));const E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._containerElement=document.querySelector(t),this._items=s,this._renderer=n}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItems(e){this._containerElement.prepend(e)}}({items:[{name:"Yosimite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{E.addItems(c(e))}},".cards__list");E.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDRHQUVSLENBQ0VGLEtBQU0sVUFDTkUsS0FBTSxxR0FFUixDQUNFRixLQUFNLHdCQUNORSxLQUFNLHFHQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sbUdEc0ZOeUgsU0FBV3hCLElBQ1RvQixFQUFRQyxTQUFTdEIsRUFBYUMsR0FBVSxHQUc1QyxnQkFHRm9CLEVBQVFRLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWRlbGV0ZS1idXR0b25cIik7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faGVhZGluZ1wiKTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxJa2VJY29uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fZGVsZXRlQ2FyZEljb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBjYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxJa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUNhcmRJY29uKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRlcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faGlkZUlucHV0ZXJyb3IoaW5wdXRFbCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdG4oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlQnRuKCk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnRuKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ0bigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dGVycm9yKGlucHV0RWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2MgPSAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShlKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2MpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzYyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goXHJcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRGb3JtKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtTmFtZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3B1cEZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBhcm91bmR0aGV1cyBmcm9tIFwiLi4vaW1hZ2VzL0Fyb3VuZHRoZXVzLnN2Z1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcblxyXG5jb25zdCBhcm91bmRUaGVVUyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQXJvdW5kdGhlVVNcIik7XHJcbmFyb3VuZFRoZVVTLnNyYyA9IGFyb3VuZHRoZXVzO1xyXG5cclxuLy8gUHJvZmlsZSBlZGl0IG1vZGFsXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5cclxuLy8gUHJvZmlsZVxyXG5cclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWVkaXQtZm9ybVwiXTtcclxuXHJcbi8vIE5ldyBjYXJkIG1vZGFsXHJcbmNvbnN0IG5ld0NhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vLyBDYXJkXHJcblxyXG5jb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcclxuXHJcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZWRWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlZFZhbGlkYXRpb24oY29uZmlnKTtcclxuLy9FdmVudCBoYW5kbGVyc1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLFxyXG4gICAgam9iOiBpbnB1dFZhbHVlcy5kZXNjcmlwdGlvbixcclxuICB9KTtcclxuXHJcbiAgcHJvZmlsZUZvcm1Qb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGRhdGEpIHtcclxuICBzZWN0aW9uLmFkZEl0ZW1zKGdlbmVyYXRlQ2FyZChkYXRhKSk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbYWRkQ2FyZEZvcm1Qb3B1cC5nZXRGb3JtTmFtZShcImFkZC1jYXJkLWZvcm1cIildLmRpc2FibGVCdG4oKTtcclxuICBhZGRDYXJkRm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgYWRkQ2FyZEZvcm1Qb3B1cC5yZXNldEZvcm0oKTtcclxufVxyXG5cclxuLy9GdW5jdGlvbnNcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI3RlbXBsYXRlXCIsIGhhbmRsZUNhcmRDbGljayk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIGltYWdlUG9wdXBQcmV2aWV3Lm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbi8vIENsYXNzIGluc3RhbmNlc1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cFByZXZpZXcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtcHJldmlldy1tb2RhbFwiKTtcclxuaW1hZ2VQb3B1cFByZXZpZXcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX190aXRsZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbmNvbnN0IGFkZENhcmRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNuZXctY2FyZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZENhcmRTdWJtaXRcclxuKTtcclxuYWRkQ2FyZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxubmV3Q2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGFkZENhcmRGb3JtUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gam9iO1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRm9ybVBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcclxuICAgIHByb2ZpbGVGb3JtUG9wdXAuZ2V0Rm9ybU5hbWUoXCJwcm9maWxlLWVkaXQtZm9ybVwiKVxyXG4gIF0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbXMoZ2VuZXJhdGVDYXJkKGNhcmREYXRhKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pO1xyXG5cclxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zaW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VQb3B1cCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZVByZXZpZXcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1wcmV2aWV3XCIpO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1wcmV2aWV3LWNhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX2ltYWdlUHJldmlldy5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VQcmV2aWV3LmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW1zKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJnZXRWaWV3IiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsImNhcmRJbWFnZUVsIiwiY2FyZFRpdGxlRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxJa2VJY29uIiwiX2RlbGV0ZUNhcmRJY29uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImFkZCIsIl9oaWRlSW5wdXRlcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlQnRuIiwiX2VuYWJsZUJ0biIsIl9zdWJtaXRCdG4iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjIiwiZSIsIl9oYW5kbGVFc2NDbG9zZSIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9pbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXRGb3JtIiwicmVzZXQiLCJnZXRGb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwibmV3Q2FyZEFkZEJ1dHRvbiIsImZvcm1zIiwiZm9ybVZhbGlkYXRvcnMiLCJnZW5lcmF0ZUNhcmQiLCJjYXJkRGF0YSIsImltYWdlUG9wdXBQcmV2aWV3IiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJfaW1hZ2VQcmV2aWV3IiwiX2ltYWdlQ2FwdGlvbiIsInByb2ZpbGVGb3JtUG9wdXAiLCJpbnB1dFZhbHVlcyIsInByb2ZpbGVJbmZvIiwic2V0VXNlckluZm8iLCJqb2IiLCJkZXNjcmlwdGlvbiIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX2pvYiIsImdldFVzZXJJbmZvIiwiYWRkQ2FyZEZvcm1Qb3B1cCIsInNlY3Rpb24iLCJhZGRJdGVtcyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9jb250YWluZXJFbGVtZW50IiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwicHJlcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=